"use strict";(self["webpackChunkonline_test"]=self["webpackChunkonline_test"]||[]).push([[92],{1920:function(e,t,s){s.d(t,{Z:function(){return u}});var i=function(){var e=this,t=e._self._c;return t("ValidationProvider",{ref:"validationInput",staticClass:"input__holder",attrs:{tag:"div",rules:e.rules,name:e.label?e.label:e.placeholder,vid:e.vid,hideDetails:e.hideDetails},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("div",{staticClass:"input__block",class:e.disabled?"disabled":""},[t("label",{staticClass:"input__block-label"},[e.label?t("span",{staticClass:"input__block-title"},[e._v(e._s(e.label))]):e._e(),t("div",{directives:[{name:"on-click-outside",rawName:"v-on-click-outside:excludedClass",value:e.hideSelectDropdown,expression:"hideSelectDropdown",arg:"excludedClass"}],staticClass:"input__block-wrap",class:s[0]?"error":"",on:{click:function(t){t.preventDefault(),e.dropdownVisible=!e.dropdownVisible}}},[e.append?t("div",{staticClass:"input__block-append",class:{active:e.dropdownVisible}},[e._t("append")],2):e._e(),t("input",e._b({ref:"input",staticClass:"input__block-input",class:e.append?"append":"",staticStyle:{cursor:"pointer !important"},attrs:{readonly:"readonly",disabled:e.disabled,type:e.type,maxlength:e.maxlength,placeholder:e.placeholder},domProps:{value:e.value},on:{input:e.inputValue}},"input",e.$attrs,!1)),t("transition",{attrs:{name:"slide"}},[e.dropdownVisible?t("div",{staticClass:"dropdown"},[t("div",{staticClass:"dropdown-wrap"},e._l(e.selectOptions,(function(s){return t("div",{key:s.id,staticClass:"dropdown-item",class:s.name===e.value||s.number===e.value?"active":"",on:{click:function(t){return e.selectItem(s)}}},[e._v(" "+e._s("classes"===e.selectType?s.number:s.name)+" ")])})),0)]):e._e()])],1),e.hideDetails?e._e():t("div",{staticClass:"input__details"},[s[0]?t("span",{attrs:{id:"error"}},[e._v(e._s(s[0]))]):e._e()])])])]}}],null,!0)})},a=[],n=s(5708),l=s(8815);(0,n.l7)("required",{...l.C1,message:"{_field_}ni kiritish majburiy"});var o={name:"BaseSelect",components:{ValidationProvider:n.d_},props:{value:{default:""},label:{type:String},type:{},selectType:{type:String},hideDetails:{type:Boolean},placeholder:{type:String},rules:{},vid:{},maxlength:{default:null},disabled:{type:Boolean,default:()=>!1},append:Boolean,autofocus:Boolean,optionsProp:{type:Array,default:()=>[{name:"Something",id:0}]}},data(){return{selectOptions:[],dropdownVisible:!1}},computed:{},methods:{inputValue(e){this.$emit("input",e.target.value)},focus(){this.$refs.input.focus()},hideSelectDropdown(){this.dropdownVisible=!1},selectItem(e){this.$emit("input",e.name),this.$emit("change",e.name),this.$emit("itemSelected",e)}},mounted(){this.selectOptions=this.optionsProp,this.autofocus&&this.focus()},watch:{optionsProp(){this.selectOptions=[],this.selectOptions=this.optionsProp}}},r=o,d=s(1001),c=(0,d.Z)(r,i,a,!1,null,"b1caf588",null),u=c.exports},8938:function(e,t,s){s.r(t),s.d(t,{default:function(){return m}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"general-information pa-10"},[t("AppText",{staticClass:"color-main mb-20",attrs:{size:"16","line-height":"20",weight:"700"}},[e._v(" Asosiy malumotlar ")]),t("div",{staticClass:"cabinet__content"},[t("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function({handleSubmit:s}){return[t("form",{on:{submit:function(t){return t.preventDefault(),s(e.updateProfile)}}},[t("div",{staticClass:"grid-block mb-10"},[t("div",{staticClass:"cabinet__content-item"},[t("BaseInput",{directives:[{name:"mask",rawName:"v-mask",value:"#########",expression:"'#########'"}],attrs:{label:"Telefon raqam",type:"text",vid:"phone",rules:"required|min:9",prepend:!0},scopedSlots:e._u([{key:"prepend",fn:function(){return[e._v(" +998 ")]},proxy:!0}],null,!0),model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),t("div",{staticClass:"cabinet__content-item"},[t("BaseInput",{attrs:{label:"Ism",type:"text",vid:"name",rules:"required"},model:{value:e.user.first_name,callback:function(t){e.$set(e.user,"first_name",t)},expression:"user.first_name"}})],1),t("div",{staticClass:"cabinet__content-item"},[t("BaseInput",{attrs:{label:"Familiya",type:"text",vid:"last_name",rules:"required"},model:{value:e.user.last_name,callback:function(t){e.$set(e.user,"last_name",t)},expression:"user.last_name"}})],1),t("div",{staticClass:"cabinet__content-item"},[t("BaseInput",{attrs:{label:"Otasining ismi",type:"text",vid:"father_name",rules:"required"},model:{value:e.user.father_name,callback:function(t){e.$set(e.user,"father_name",t)},expression:"user.father_name"}})],1),t("div",{staticClass:"cabinet__content-item"},[t("BaseInput",{attrs:{label:"Email",type:"text",vid:"email",rules:"required|email"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),t("div",{staticClass:"cabinet__content-item"},[t("base-select",{attrs:{label:"Viloyat",type:"text",vid:"Fakultet",placeholder:"Viloyatni tanlang",optionsProp:e.regions,append:!0},on:{itemSelected:e.regionsId},scopedSlots:e._u([{key:"append",fn:function(){return[t("svg",{staticClass:"Dropdown_self__FtxaI",staticStyle:{height:"1rem",width:"1rem"},attrs:{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M13.2797 5.9668L8.93306 10.3135C8.41973 10.8268 7.57973 10.8268 7.06639 10.3135L2.71973 5.9668",stroke:"rgb(51, 54, 57)","stroke-width":"1.5","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"}})])]},proxy:!0}],null,!0),model:{value:e.user.region,callback:function(t){e.$set(e.user,"region",t)},expression:"user.region"}})],1),t("div",{staticClass:"cabinet__content-item"},[t("base-select",{attrs:{label:"Tuman",type:"text",vid:"Fakultet",placeholder:"Tumanni tanlang",optionsProp:e.districts,append:!0,disabled:e.districts_select},on:{itemSelected:e.filterDistrictId},scopedSlots:e._u([{key:"append",fn:function(){return[t("svg",{staticClass:"Dropdown_self__FtxaI",staticStyle:{height:"1rem",width:"1rem"},attrs:{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M13.2797 5.9668L8.93306 10.3135C8.41973 10.8268 7.57973 10.8268 7.06639 10.3135L2.71973 5.9668",stroke:"rgb(51, 54, 57)","stroke-width":"1.5","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"}})])]},proxy:!0}],null,!0),model:{value:e.user.district,callback:function(t){e.$set(e.user,"district",t)},expression:"user.district"}})],1),t("div",{staticClass:"cabinet__content-item"},[t("base-select",{attrs:{label:"Maktab",type:"text",vid:"Fakultet",placeholder:"Maktabni tanlang",optionsProp:e.schools,append:!0,disabled:e.school_select,selectType:"school"},on:{itemSelected:e.filterSchoolId},scopedSlots:e._u([{key:"append",fn:function(){return[t("svg",{staticClass:"Dropdown_self__FtxaI",staticStyle:{height:"1rem",width:"1rem"},attrs:{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M13.2797 5.9668L8.93306 10.3135C8.41973 10.8268 7.57973 10.8268 7.06639 10.3135L2.71973 5.9668",stroke:"rgb(51, 54, 57)","stroke-width":"1.5","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"}})])]},proxy:!0}],null,!0),model:{value:e.user.school,callback:function(t){e.$set(e.user,"school",t)},expression:"user.school"}})],1)]),t("AppButton",{attrs:{theme:"green",radius:"10","font-size":16,sides:20,height:45,weight:"500",type:"submit"}},[e._v(" O'zgarishlarni saqlash ")])],1)]}}])})],1)],1)},a=[],n=s(5708),l=s(5957),o=s(4860),r=s(3822),d=s(1920),c={name:"general-information",components:{AppButton:o.Z,BaseInput:l.Z,ValidationObserver:n._j,BaseSelect:d.Z},data(){return{login:"",firstName:"",lastName:"",phoneNumber:"",email:"",password:"",newPassword:"",region:"",regions:[],districts:[],schools:[],regionId:null,districtsId:null,schoolId:null,districts_select:!0,school_select:!0}},computed:{...(0,r.Se)(["user"])},methods:{getRegions(){this.$http.get("common/regions/").then((e=>{e?this.regions=e:console.error("Xatolik: Serverdan ma'lumotlar topilmadi")}))},getDistricts(e){this.$http.get(`common/districts/?region_id=${e}`).then((e=>{e?(this.districts=e,this.user.district=null):console.error("Xatolik: Serverdan ma'lumotlar topilmadi")}))},getSchools(e){this.$http.get(`common/schools/?district_id=${e}`).then((e=>{e?(this.schools=e,this.user.school=null):console.error("Xatolik: Serverdan ma'lumotlar topilmadi")}))},async regionsId(e){console.log(e),this.regionId=e.id,await this.getDistricts(e.id),this.districts_select=!1},async filterDistrictId(e){this.districtsId=e.id,await this.getSchools(e.id),this.school_select=!1},filterSchoolId(e){this.schoolId=e.id},formattedDate(){this.user.birth_date=this.$moment(this.user.birth_date).format("DD-MM-YYYY"),console.log("asas")},updateProfile(){this.$http.patch("users/profile/",{phone:this.user.phone,first_name:this.user.first_name,last_name:this.user.last_name,father_name:this.user.father_name,email:this.user.email,district:this.districtsId,school:this.schoolId}).then((e=>{e.error?this.errorNotification("Ma'lumotlar yangilashda xatolik yuz berdi"):this.successNotification("Saqlandi")})).catch((e=>{e.response&&e.response.data&&e.response.data.message?this.errorNotification(e.response.data.message):this.errorNotification("Xatolik yuz berdi")}))}},mounted(){this.getRegions()},watch:{user(){}}},u=c,p=s(1001),h=(0,p.Z)(u,i,a,!1,null,"7f355957",null),m=h.exports}}]);
//# sourceMappingURL=92.dc4b6241.js.map